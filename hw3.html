<p>Input:<br><textarea id="input" rows="10" cols="80"></textarea>
<p><button onclick="process()">Process</button>
<p>Output:<br><textarea id="output" rows="10" cols="80"></textarea>

<script src="https://linguatorium.com/tools/static/320/tau.js"></script>
<script src="https://linguatorium.com/tools/static/320/grammar.js"></script>

<script>

function process() {
  x = document.getElementById("input").value

words = x.split(" ")
//alert(typeof words)
y = ""
  
vowels = 'aeiou'
  
for (i = 0; i < words.length; i++) {
    if (words[i] == 'a' || words[i] == 'an') {
        if (vowels.indexOf(words[i+1].charAt(0) >= 0)) {
            //alert('there\'s a vowel!')//vowels
            if ((words[i] == 'a') && (vowels.indexOf(words[i+1].charAt(0)) >= 0)) {
                words[i] = 'an'
            } else if ((words[i] == 'an') && (vowels.indexOf(words[i+1].charAt(0)) <= 0)) {
                words[i] = 'a'
            }
        }
    }
}

  
  y = words.join(" ")
  document.getElementById("output").value = y
}

</script>